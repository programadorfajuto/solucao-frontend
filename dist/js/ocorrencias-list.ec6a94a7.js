(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ocorrencias-list"],{7353:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 grid-margin"},[a("div",{staticClass:"row"},[0==t.user.perfil||3==t.user.perfil?a("dashboard-card-component",{attrs:{col:"col-md-6",title:"Total de Ocorrências",value:t.dados.totalDeOcorrencias}}):t._e()],1)]),a("div",{staticClass:"col-md-12 grid-margin"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h4",{staticClass:"card-title mb-5"},[t._v("Filtro de Ocorrências")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Nome do Sócio:")]),a("div",{staticClass:"input-group"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nome,expression:"nome"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.nome},on:{input:function(e){e.target.composing||(t.nome=e.target.value)}}})])])])])]),a("div",{staticClass:"card-body"},[3!=t.user.perfil?a("router-link",{staticClass:"btn btn-lg btn-success float-right",attrs:{to:{name:"ocorrencias-create"}}},[t._v("Adicionar Ocorrência")]):t._e(),t.carregando?a("loader-component"):a("table",{staticClass:"table table-striped table-responsive"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Nome do Sócio")]),a("th",{attrs:{scope:"col"}},[t._v("Data da Abertura")]),a("th",{attrs:{scope:"col"}},[t._v("Operador")]),a("th",{attrs:{scope:"col"}},[t._v("Situação")]),a("th",{attrs:{scope:"col"}},[t._v("Ações")])])]),a("tbody",t._l(t.paginados.results,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.socio.nome))]),a("td",[t._v(t._s(e.dataDeCriacao))]),a("td",[t._v(t._s(e.operador?e.operador.nome:"Não designado"))]),a("td",[t._v(t._s(2==e.situacao?t.situacoes[e.situacao]+" para "+e.dataDoAgendamento:t.situacoes[e.situacao]))]),a("td",[a("crud-actions-component",{attrs:{namespace:"ocorrencias",action:"ActionExcluirOcorrencia",id:e.id},on:{visualizar:function(a){return t.$router.push({name:"ocorrencias-view",params:{id:e.id}})},editar:function(a){return t.$router.push({name:"ocorrencias-view",params:{id:e.id}})}}})],1)])})),0),a("tfoot")])],1),a("div",{staticClass:"card-footer"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"}),a("div",{staticClass:"col"},[a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-icons btn-rounded btn-primary",on:{click:function(e){return t.filtrar(t.paginados.currentPage>1?t.paginados.currentPage-1:null)}}},[a("i",{staticClass:"fa fa-chevron-left"})])])]),a("div",{staticClass:"col"},[a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-icons btn-rounded btn-primary",on:{click:function(e){return t.filtrar(t.paginados.currentPage<t.paginados.pageCount?t.paginados.currentPage+1:null)}}},[a("i",{staticClass:"fa fa-chevron-right"})])])]),a("div",{staticClass:"col"})])])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend bg-danger"},[a("span",{staticClass:"input-group-text bg-transparent"},[a("i",{staticClass:"text-white fa fa-user-circle"})])])}],n=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("1da1")),i=a("ade3"),c=a("2f62"),o=a("adce"),l=a("87c7"),u=a("c6fd"),d=a("fbfe");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b={components:{DashboardCardComponent:o["a"],LoaderComponent:l["a"],CrudActionsComponent:u["a"]},data:function(){return{carregando:!0,perfis:d["a"].perfil,situacoes:d["a"].situacaoDaOcorrencia,filtro:{nome:""},nome:""}},computed:f(f({},Object(c["c"])("auth",["user"])),Object(c["c"])("ocorrencias",["paginados","dados"])),methods:f(f({},Object(c["b"])("ocorrencias",["ActionBuscarOcorrenciasPaginadasPorUsuario","ActionBuscarDadosIniciais","ActionBuscarTiposDeContato"])),{},{filtrar:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.carregando=!0,this.filtro.nome=this.nome,t.next=4,this.ActionBuscarOcorrenciasPaginadasPorUsuario({filtro:this.filtro,pagina:e,quantidade:5,id:window.localStorage["id"]});case 4:this.carregando=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}),watch:{nome:function(t){this.filtro.nome=t,this.filtrar(1)}},mounted:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.filtrar(1);case 2:return t.next=4,this.ActionBuscarDadosIniciais();case 4:return t.next=6,this.ActionBuscarTiposDeContato();case 6:this.carregando=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},m=b,v=a("2877"),h=Object(v["a"])(m,r,s,!1,null,null,null);e["default"]=h.exports},"87c7":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader-demo-box"},[a("div",{staticClass:"jumping-dots-loader"},[a("span"),a("span"),a("span")])])}],n={},i=n,c=a("2877"),o=Object(c["a"])(i,r,s,!1,null,null,null);e["a"]=o.exports},adce:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grid-margin stretch-card",class:t.col},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body pb-0"},[a("div",{staticClass:"d-flex justify-content-between"},[a("h4",{staticClass:"card-title mb-0"},[t._v(t._s(t.title))])]),a("h3",{staticClass:"font-weight-medium mb-4"},[t._v(t._s(t.value))])])])])},s=[],n={props:["title","col","value"]},i=n,c=a("2877"),o=Object(c["a"])(i,r,s,!1,null,null,null);e["a"]=o.exports},c6fd:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"btn btn-icons btn-rounded btn-primary",attrs:{type:"button"},on:{click:function(e){return t.$emit("visualizar")}}},[a("i",{staticClass:"mdi mdi-eye"})]),0==t.user.perfil||2==t.user.perfil&&t.subIsActive("/socios")?a("button",{staticClass:"btn btn-icons btn-rounded btn-warning",attrs:{type:"button"},on:{click:function(e){return t.$emit("editar")}}},[a("i",{staticClass:"mdi mdi-pen"})]):t._e(),0==t.user.perfil&&"undefined"==typeof t.excluir?a("button",{staticClass:"btn btn-icons btn-rounded btn-danger",attrs:{type:"button"},on:{click:t.mostrarModalDeConfirmacao}},[a("i",{staticClass:"mdi mdi-trash-can"})]):t._e()])},s=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid pt-3 pb-3"},[t._m(0),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-lg btn-primary float-left",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[a("i",{staticClass:"mdi mdi-arrow-left"}),t._v(" voltar\n      ")]),t.carregando?a("button",{staticClass:"btn btn-lg btn-danger float-right",attrs:{type:"button"},on:{click:t.deletarEntidade}},[a("i",{staticClass:"fa-spin fa fa-refresh"})]):a("button",{staticClass:"btn btn-lg btn-danger float-right",attrs:{type:"button"},on:{click:t.deletarEntidade}},[t._v("Sim, Excluir")])])])])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h3",{staticClass:"text-center"},[t._v("Quer mesmo excluir este dado?")])])])}],o=(a("96cf"),a("1da1")),l={props:["namespace","action","id"],data:function(){return{carregando:!1}},methods:{deletarEntidade:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.carregando=!0,t.next=4,this.$store.dispatch(this.namespace+"/"+this.action,this.id);case 4:e=t.sent,this.carregando=!1,this.$emit("close"),this.$toasted.success(e),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),this.carregando=!1,this.$emit("close"),this.$toasted.error(t.t0.data?t.t0.data.mensagem:"Não foi possível excluir este dado.");case 15:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}()}},u=l,d=a("2877"),p=Object(d["a"])(u,i,c,!1,null,null,null),f=p.exports,b=a("2f62");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h={computed:v({},Object(b["c"])("auth",["user"])),props:["namespace","action","id","excluir"],methods:{mostrarModalDeConfirmacao:function(){this.$modal.show(f,{namespace:this.namespace,action:this.action,id:this.id},{height:"auto"})},subIsActive:function(t){var e=this,a=Array.isArray(t)?t:[t];return a.some((function(t){return 0===e.$route.path.indexOf(t)}))}}},g=h,C=Object(d["a"])(g,r,s,!1,null,null,null);e["a"]=C.exports}}]);
//# sourceMappingURL=ocorrencias-list.ec6a94a7.js.map